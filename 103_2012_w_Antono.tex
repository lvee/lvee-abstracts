\documentclass[10pt, a5paper]{article}
\input{preamble.tex}

\begin{document}

\title{Обзор архитектуры и возможностей GObject Introspection}%\footnote{Текст данных и последующих тезисов, кроме специально оговоренных случаев, доступен под лицензией Creative Commons Attribution-ShareAlike 3.0}

\author{Антон Васильев\footnote{Минск, Беларусь}}
\maketitle

\begin{abstract}
Article gives an overview of GObject Introspection architecture and use cases.
One of GObject Introspection main goal is share binding infrastructure to make binding"=friendly applications and libraries.
The introspection project solves this task by putting all metadata
inside the GObject library itself, with annotations in comments.
This decreases duplicated work for binding authors.
\end{abstract}

\subsection*{История и цели проекта}

GObject Introspection "--- это проект, который возник для решения проблем
с созданием высокоуровневых языковых привязок \linebreak (bindings) для библиотек GNOME. Долгое время все языковые привязки поддерживались вручную, и зачастую значительно отставали от библиотек \cite{Antono1}.

GObject Introspection "--- это технология, позволяющая создавать
автоматические языковые привязки для библиотек, использующих GLib и
GObject.  Привязки могут создаваться как на этапе исполнения (через
FFI) так и на этапе сборки (с использованием компилятора привязок для
конкретного языка).

Для извлечения метаданных из библиотек используется система аннотаций в комментариях к функциям/методам.

Метаданные хранятся в бинарном формате typelib, обеспечивающем
быстрый доступ к библиотечным функциям через FFI. Для создания typelib-файла используется промежуточный формат GIR (GObject Introspection
Repository). GIR основан на XML, содержит информацию о вызове
функций и документацию API.

\subsection*{Архитектура и примеры использования}

  Этап сборки:
  
 \begin{figure}[ht]
  \centering
  \includegraphics[width=7cm]{103_2012_antono-crop}
  \label{fig:Antono1}
\end{figure}

%\subsection*{Примеры использования}

Я создал репозиторий \cite{Antono2} с примерами использования библиотеки,
базирующейся на GObject, через автоматические привязки для разных языков.

Рассмотрим пример, использующий язык Vala для создания библиотеки и
обращения к этой библиотеке из Ruby:

\begin{verbatim}
namespace ValaObject {
	public void say_hello_to(string lang)
	{
		print(@"I love You, $lang!!!\n");
		print("-- Vala\n\n");
	}

	public class ValaClass : Object {
		public string name = "Vala Class";

		public string append_to_name(string suffix) {
			return "%s %s".printf(name, suffix);
		}
	}
}
\end{verbatim}

Ruby использует метаданные из GIR через библиотеку gir\_ffi:

\begin{verbatim}
require 'gir_ffi'

GirFFI.setup(:ValaObject) # Создание объекта

ValaObject.say_hello_to('Ruby')

class MyValaClass < ValaObject::ValaClass
  def append_to_name(suffix)
    super + ' (subclassed) ' + suffix
  end
end

instance = MyValaClass.new
puts instance.append_to_name("called from Ruby")
\end{verbatim}

\subsection*{Существующие привязки}

Список существующих привязок для GObject Introspection выглядит следующим образом:

\begin{itemize}
  \item Vala "--- Родная поддержка GIR.
  \item Genie "--- Родная подержка GIR.
  \item PyGObject "--- привязки для Python
  \item Gjs "--- Javascript (spidermonkey)
  \item Seed "--- Javascript (JSCore, WebKit JS engine)
  \item node-gir "--- Node.js (V8 Engine)
  \item ruby-gir-ffi "--- Ruby
  \item gobject-for-php "--- PHP
  \item lgob "--- Lua (этап компиляции)
  \item lgi "--- Lua (этап исполнения)
  \item GTK2-Perl/Introspection "--- привязки для Perl
  \item guile-gir "--- Scheme (guile)
  \item sbank "--- Scheme (Ikarus, Ypsilon)
  \item JGIR "--- Java/JVM (этап компиляции, через typelib)
  \item GObjectIntrospection/GObjectConsume "--- C++, Qt (этап компиляции)
  \item factor-gir "--- Factor
  \item gogobject "--- Go (этап компиляции)
  \item cl-gobject-introspection "--- Common Lisp
  \item cl-gir "--- GIR for Common Lisp (в процессе)
  \item haskel-gi "--- Haskell (в процессе)
  \item mono-introspect "--- Mono
  \item ocaml-gir "--- Ocaml (этап компиляции)
  \item gir2pascal "--- Pascal
\end{itemize}



\begin{thebibliography}{9}

\bibitem{Antono1} GTK+ Language Bindings. \url{http://www.gtk.org/language-bindings.php}

\bibitem{Antono2} GObject for your favorite language. \url{https://github.com/antono/vala-object}

\end{thebibliography}

\end{document}




