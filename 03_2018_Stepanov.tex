\documentclass[10pt, a5paper]{article}
\input{preamble.tex}
\begin{document}
\title{Взгляд на перевод инфраструктуры на базе WIndows на Unix/LInux\footnote{\url{d.stepanov@itg.by}, \url{https://lvee.org/en/abstracts/274}}}
\author{Дмитрий Степанов, Минск, Belarus}
\maketitle
\begin{abstract}
This Engineering Report carries the essence of the problem, the integration between the two worlds and the camps of unqualified skeptics, who are often similar to the racetrack. 
The transition from a proprietary infrastructure to a free one at this given time will always be complicated by two factors -- maintenance and integration.
\end{abstract}
<<\ldots{}кто из вас без греха, первый брось в нее камень>>

\subsection*{Введение}

Развитие цифровых технологий с каждым годом предлагает, в потребительском плане, все более широкий спектр сервисов, программ, которые упрощают жизнедеятельность человека, ведение бизнеса предприятия и нашу жизнь в целом.

Компании малого и среднего бизнеса ищут решения, которые позволят идти в ногу с современными тенденциями в сфере IT технологий, новейшими программными разработками, и естественно чтобы последние не стали тяжкой ношей для развивающего предприятия.

Здесь рассматривается один из вариантов будущего систем, построенных на компромиссе между проприетарным программным обеспечением и продуктами, распространяющимися под лицензией GNU GPL или иными~--- варианты <<почти>> бесшовной миграции <<классической>> инфраструктуры на решения основанные на Linux.

Представленые материалы основаны исключительно на эмпирических методах внедрения решений на базе свободно распространяемого программного обеспечения в действующие инфраструктуры предприятий, и не несет в себе глобального решения проблемы.

По субъективному мнению автора, будущее СПО~--- за гибридизацией, между свободно распространяемым программным обеспечением и проприетарным.

\subsection*{Задача}

Первоначальной задачей, поставленной перед автором и его командой стали уменьшение стоимости обслуживания IT-\linebreak инфраструктуры предприятия без существенных потерь в сервисном эквиваленте и стоимости обслуживающего персонала (как обычно и происходит в случае внедрения Linux/Unix; опционально выделим GNU, так как многие приложения, распространяемые по данной философии, давно утратили суть).

Проще говоря, уже имеющийся на предприятии специалист должен в кратчайшие сроки и без особых трудностей освоить ново-внедряемые сервисы на базе Linux.

\subsection*{Действующая структура предприятия и принятые решения}

Существующие Сервисы (в рамках одного физического сервера): Active directory, DHCP, DNS, File Services, Gateway (на базе продуктов компании Kerio), сервер удалённого рабочего стола, 1С Бухгалтерия и некоторые иные сервисы, которые к сожалению в реалиях некоторых сфер бизнеса пока еще не могут быть интегрированы с системами на OPS (преимущественно программное обеспечение, выпущенное государственными органами~--- подача деклараций, таможня и многие иные).

Требуемое <<Заказчиком>> развитие:

\begin{itemize}
  \item максимальное уменьшение стоимость программного обеспечения;
  \item стоимость обслуживания инфраструктуры~--- по сути стоимость персонала.
\end{itemize}

Естественно, в большинстве случаев внедряемого OPS, большинство компаний, не относящихся к IT, останавливает стоимость специалиста, способного сопровождать инфраструктуру Linux/Unix, его замена, и многие иные аспекты, связанные с рыночной и <<привычной>> стороной вопроса.

Этапы:

\textbf{Этап 1}. Разделение существующей структуры на сегментированную структуру <<один сервис~--- один сервер>>.
Данное решение обусловлено необходимостью управлять каждым сервисом независимо от остальных, с минимальными вариациями простоя инфраструктуры в целом.

\textbf{Этап 2.} Подбор системы виртуализации на базе Open Source.
Рассматривались решения на базе KVM и XCP-ng, а так же вариация на базе VMware ESXi. Внедрение виртуализации~--- решение классическое, обусловленное необходимостью максимально (насколько возможно) использовать выделенные серверные мощности, упрощенное резервное копирование, быстротe и простотe запуска нового сервиса, оптимальное решение для реализации \textbf{этапа 1}.

Выбор был остановлен на XCP-ng, как на гипервизоре с хорошо продуманной простой установкой и настройкой и интерфейсом, близким для специалистов, которые работали в гипервизорах от компании VMware.

Также выбор пал на данный гипервизор после <<ловкого трюка>> со стороны компании Xen Citrix, которая урезала функционал гипервизора, распространяемого по лицензии GNU GPL. В частности, по этой же причине было принято решение не эксплуатировать гипервизор от компании VMware.

Так же развернутый для XCP-ng, Xen Orchestra позволяет проводить резервное копирование, строить базовые примитивы облака, что в свою очередь позволяет уменьшить необходимость взаимодействия неквалифицированного специалиста с самим гипревизором.

\textbf{Этап 3.} Проработка замены классических Windows сервисов:
DNS, DHCP, AD, File Server, GP. При этом установка в стандартном варианте сервисов Bind, DHCP, Samba и т.п. возможна, но требует специалиста, имеющего базовые знания операционных систем Unix/Linux, и вызывает зачастую большие трудности в конфигурации посредством консоли.

Таким образом, было принято решение воспользоваться <<комбайном>> с максимально простым и доступным интерфейсом для среднестатистического специалиста.

Были рассмотрены варианты на основе:

\begin{itemize}
  \item UCS
  \item Zentyal
  \item ClearOS
  \item И некоторые иные <<сборные солянки>>.
\end{itemize}

Основные требования к <<комбайну>>~--- замена AD, DNS, DHCP, FS, простота настройки и управления.

В результате тестирования, а также ресурсов и доступности в сфере лицензирования, был выбран Zentyal.
Основополагающими факторами стали:

\begin{itemize}
  \item распространение комьюнити версии по лицензии GNU GPL;
  \item все сервисы предлагаемые в дистрибутиве рабочие и не требуют дополнительного приобретения модулей;
  \item нет ограничений по количеству ресурсов, пользователей;
  \item достойно реализовано AD + GP при использовании Windows клиентов;
  \item унифицированное решение, которое, в том числе без особых трудностей, заменило 80\% функций проприетарного сервиса на базе Kerio Control;
  \item простое управление через web-интерфейс.
\end{itemize}

\textbf{Этап 4}. Решения для проприетарного ПО, базирующегося на Windows.
Основными такими программами, используемыми на предприятии, являются 1С Бухгалтерия и CRM.

1С решено было перенести на web-версию вместо терминальной, с переездом с MS SQL и Windows на Debian/Centos + PostgreSQL. Были очевидные потери в производительности системы, но они решились ресурсной и базовой переработкой запросов к базе данных.

Это решение позволило сэкономить на лицензировании Windows Server + TS CAL + лицензиях удаленного подключения вне контура локальной сети.

\textbf{5 этап}. Клиентское ПО.
Клиентские станции, не работающие с проприетарным программным обеспечением (не завязанные на нем на основе лицензии, специфики или иной не решаемой на данный момент задачи), были переведены на Linux-дистрибутивы и пакеты, аналогичные Windows-приложениям (внедрение Linux-клиентов шло поэтапно с постепенным выводом из строя терминального сервера с 1С Бухгалтерией и переводом на web-версию 1С).

На данный момент структура работает год, полет нормальный (не без <<допиливаний>>, но незначительных).

Преимущества внедрения (классика):

\begin{enumerate}
  \item Стоимость программного обеспечения (при переходе с простого Windows Server в качестве DC и под него CL на 2018 год экономия сразу исчисляется в тысячах у.е.).
  \item Защищенность из-за нераспространенности (исключительно локальная инфраструктура).
  \item Вариативность.
\end{enumerate}

\subsection*{Недостаток, и это не ошибка.}

В большинстве это~--- специалист по Linux и сам дистрибутив OPS. Зачастую~--- отсутствие близких аналогов, позволяющих не переучивать специалиста, но дающих тот же функционал.

\subsection*{Внедрение~--- сожаление.}

Любое непривычное для конечного пользователя внедрение влечет за собой массу мелких замечаний и стопоров для перевода инфраструктуры на свободно распространяемое программное обеспечение. Как результат, зачастую удачно подобранное и работающее решение умирает после пилотного внедрения в результате человеческого фактора и привычки.

\subsection*{<<Главное~--- не мнение и не личность, главное~--- принятие социумом.>>}

\textbf{Победа}~--- экономия и возможность донести, что систему можно построить и на Linux~--- особенно, если строить ее с нуля, или дать человеку, который до этого не знал иного: моя мама любит Debian :))

\end{document}
